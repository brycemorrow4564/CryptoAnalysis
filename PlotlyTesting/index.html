<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <title>Plotly Test</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script
            id="sap-ui-bootstrap"
            src="../resources/sap-ui-core.js"
            data-sap-ui-theme="sap_belize"
            data-sap-ui-libs="sap.m"
            data-sap-ui-compatVersion="edge"
            data-sap-ui-preload="async"
            data-sap-ui-resourceroots='{
            "sap.crypto.app": "."}'>
    </script>
</head>
<body class="sapUiBody" id="content">
<div id="myDiv"></div>
<script>

var FORMATTER = {

    exWhyIfyData: function(xField, yField, data) {
        data = data['priceHistory'];
        var xArr = [],
            yArr = [],
            dataObj = {};

        data.forEach(function(row) {
            xArr.push(row[xField]);
            yArr.push(row[yField]);
        });

        //dataObj['name'] = 'Market Cap over time';
        //dataObj['marker'] = { "color": "rgb(255, 127, 14)" };
        dataObj['mode'] = "lines";
        dataObj['x'] = xArr;
        dataObj['y'] = yArr;
        dataObj['type'] = "scatter";

        return [dataObj]
    }
};

var bitcoinJson;
$.ajax({
    async: false,
    url: '../CryptoJSON/bitcoin.json',
    success: function(data) {
        bitcoinJson = data
    }
});

var data = FORMATTER.exWhyIfyData('Date', 'Market Cap', bitcoinJson);

Plotly.newPlot('myDiv', data);

</script>
</body>
</html>


<!--
Single Coin metrics.
1. Market Cap over time
2. Price over time (Close or Open)?


-->